"use strict";

var mainPage = document.querySelector(".fav-page"),
  popupsWrap = document.querySelector(".popup"),
  showPopupBtns = document.querySelectorAll(".info-icon"),
  popupItems = document.querySelectorAll(".popup__item"),
  choseBlock = document.querySelector(".chose"),
  resultBlock = document.querySelector(".result");
function setPopup(wrap, popupName, btns, popupItems) {
  var popup = wrap.querySelector(".".concat(popupName));
  btns.forEach(function (btn) {
    if (btn.parentNode.parentNode.classList.contains(popupName)) {
      btn.addEventListener("click", function () {
        popupItems.forEach(function (item) {
          item.classList.remove("_active");
        });
        popup.classList.add("_active");
        document.body.style.overflow = "hidden";
        wrap.classList.remove("_opacity");
      });
      var closeBtn = popup.querySelector(".popup__close");
      closeBtn.addEventListener("click", function () {
        popup.classList.remove("_active");
        document.body.style.overflow = "auto";
        wrap.classList.add("_opacity");
      });
    }
  });
}
setPopup(popupsWrap, "_easy", showPopupBtns, popupItems);
setPopup(popupsWrap, "_medium", showPopupBtns, popupItems);
setPopup(popupsWrap, "_hight", showPopupBtns, popupItems);
setPopup(popupsWrap, "_notify", showPopupBtns, popupItems);
function startCountdown(selector, endDate) {
  var elements = document.querySelectorAll("".concat(selector, " .welcome__timer-item-num"));
  if (elements.length !== 4) {
    console.error('Invalid selector!');
    return;
  }
  var targetDate = new Date(endDate).getTime();
  function updateTimer() {
    var now = new Date().getTime();
    var timeLeft = targetDate - now;
    if (timeLeft <= 0) {
      clearInterval(intervalId);
      setTimerValues([0, 0, 0, 0]);
      return;
    }
    var days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
    var hours = Math.floor(timeLeft % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));
    var minutes = Math.floor(timeLeft % (1000 * 60 * 60) / (1000 * 60));
    var seconds = Math.floor(timeLeft % (1000 * 60) / 1000);
    setTimerValues([days, hours, minutes, seconds]);
  }
  function setTimerValues(values) {
    values.forEach(function (value, index) {
      elements[index].textContent = value < 10 ? "0".concat(value) : value;
    });
  }
  updateTimer();
  var intervalId = setInterval(updateTimer, 1000);
}
startCountdown('.welcome__timer', '2025-01-31T23:59:59');
function monitorVisibility(selector, animation, delay) {
  var element = document.querySelector(selector);
  if (!element) {
    console.error('Element not found!');
    return;
  }
  var observer = new IntersectionObserver(function (entries) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        setTimeout(function () {
          element.classList.add(animation);
        }, delay);
      }
    });
  });
  observer.observe(element);
}

// Виклик функції
monitorVisibility('.notify__pers', "showZeus", 0);
monitorVisibility('.notify__pers-buble', "showZeusBuble", 1200);
monitorVisibility('.chose__pers-buble', "showZeusBuble", 0);
monitorVisibility('.chose__card._easy', "showCard", 400);
monitorVisibility('.chose__card._medium', "showCard", 800);
monitorVisibility('.chose__card._hight', "showCard", 1200);
function toggleBlocks(hideBlock, hideClass, showBlock, showClass, state) {
  mainPage.classList.add(state);
  hideBlock.classList.add(hideClass);
  hideBlock.addEventListener("animationend", function () {
    showBlock.style.display = "flex";
    showBlock.style.height = hideBlock.clientHeight;
    hideBlock.classList.add("_hidden");
    setTimeout(function () {
      showBlock.classList.add(showClass);
      showBlock.style.height = "auto";
      setTimeout(function () {
        var items = showBlock.querySelectorAll(".result__bets-item");
        items.forEach(function (item, i) {
          if (item.classList.contains("you")) {
            setTimeout(function () {
              var you = item.querySelector(".result__bets-you");
              var btn = document.querySelector(".result__btn");
              you.classList.add('showYou');
              setTimeout(function () {
                btn.classList.add("showBtn");
              }, 200);
            }, 2700);
          }
          setTimeout(function () {
            item.classList.add("showItem");
          }, 250 * items.length - i * 250);
        });
      });
    }, 50);
  });
}

//for test
var menuBtn = document.querySelector(".menu-btn"),
  menu = document.querySelector(".menu-test"),
  easyBtn = document.querySelector(".easy"),
  mediumBtn = document.querySelector(".medium"),
  hightBtn = document.querySelector(".hight"),
  noStateBtn = document.querySelector(".not-join");
function changeStatePage(btn, state) {
  btn.addEventListener("click", function () {
    mainPage.className = "fav-page";
    if (state) {
      toggleBlocks(choseBlock, "choseHide", resultBlock, "resultShow", state);
    }
  });
}
changeStatePage(easyBtn, "_easy");
changeStatePage(mediumBtn, "_medium");
changeStatePage(hightBtn, "_hight");
// changeStatePage(noStateBtn, false)
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWFpblBhZ2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cHNXcmFwIiwic2hvd1BvcHVwQnRucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cEl0ZW1zIiwiY2hvc2VCbG9jayIsInJlc3VsdEJsb2NrIiwic2V0UG9wdXAiLCJ3cmFwIiwicG9wdXBOYW1lIiwiYnRucyIsInBvcHVwIiwiZm9yRWFjaCIsImJ0biIsInBhcmVudE5vZGUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpdGVtIiwicmVtb3ZlIiwiYWRkIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJjbG9zZUJ0biIsInN0YXJ0Q291bnRkb3duIiwic2VsZWN0b3IiLCJlbmREYXRlIiwiZWxlbWVudHMiLCJsZW5ndGgiLCJjb25zb2xlIiwiZXJyb3IiLCJ0YXJnZXREYXRlIiwiRGF0ZSIsImdldFRpbWUiLCJ1cGRhdGVUaW1lciIsIm5vdyIsInRpbWVMZWZ0IiwiY2xlYXJJbnRlcnZhbCIsImludGVydmFsSWQiLCJzZXRUaW1lclZhbHVlcyIsImRheXMiLCJNYXRoIiwiZmxvb3IiLCJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwidmFsdWVzIiwidmFsdWUiLCJpbmRleCIsInRleHRDb250ZW50Iiwic2V0SW50ZXJ2YWwiLCJtb25pdG9yVmlzaWJpbGl0eSIsImFuaW1hdGlvbiIsImRlbGF5IiwiZWxlbWVudCIsIm9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsInNldFRpbWVvdXQiLCJvYnNlcnZlIiwidG9nZ2xlQmxvY2tzIiwiaGlkZUJsb2NrIiwiaGlkZUNsYXNzIiwic2hvd0Jsb2NrIiwic2hvd0NsYXNzIiwic3RhdGUiLCJkaXNwbGF5IiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiaXRlbXMiLCJpIiwieW91IiwibWVudUJ0biIsIm1lbnUiLCJlYXN5QnRuIiwibWVkaXVtQnRuIiwiaGlnaHRCdG4iLCJub1N0YXRlQnRuIiwiY2hhbmdlU3RhdGVQYWdlIiwiY2xhc3NOYW1lIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFFBQVEsR0FBR0MsUUFBUSxDQUFDQyxhQUFhLENBQUMsV0FBVyxDQUFDO0VBQ2hEQyxVQUFVLEdBQUdGLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFFBQVEsQ0FBQztFQUM3Q0UsYUFBYSxHQUFHSCxRQUFRLENBQUNJLGdCQUFnQixDQUFDLFlBQVksQ0FBQztFQUN2REMsVUFBVSxHQUFHTCxRQUFRLENBQUNJLGdCQUFnQixDQUFDLGNBQWMsQ0FBQztFQUN0REUsVUFBVSxHQUFHTixRQUFRLENBQUNDLGFBQWEsQ0FBQyxRQUFRLENBQUM7RUFDN0NNLFdBQVcsR0FBR1AsUUFBUSxDQUFDQyxhQUFhLENBQUMsU0FBUyxDQUFDO0FBRW5ELFNBQVNPLFFBQVEsQ0FBRUMsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLElBQUksRUFBRU4sVUFBVSxFQUFDO0VBQ2pELElBQUlPLEtBQUssR0FBR0gsSUFBSSxDQUFDUixhQUFhLFlBQUtTLFNBQVMsRUFBRztFQUUvQ0MsSUFBSSxDQUFDRSxPQUFPLENBQUMsVUFBQUMsR0FBRyxFQUFJO0lBQ2hCLElBQUdBLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDQSxVQUFVLENBQUNDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDUCxTQUFTLENBQUMsRUFBQztNQUN2REksR0FBRyxDQUFDSSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBSztRQUMvQmIsVUFBVSxDQUFDUSxPQUFPLENBQUMsVUFBQU0sSUFBSSxFQUFHO1VBQ3RCQSxJQUFJLENBQUNILFNBQVMsQ0FBQ0ksTUFBTSxDQUFDLFNBQVMsQ0FBQztRQUNwQyxDQUFDLENBQUM7UUFDRlIsS0FBSyxDQUFDSSxTQUFTLENBQUNLLEdBQUcsQ0FBQyxTQUFTLENBQUM7UUFDOUJyQixRQUFRLENBQUNzQixJQUFJLENBQUNDLEtBQUssQ0FBQ0MsUUFB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QUFXLEVBQUVDLFdBQVcsRUFBRSxZQUFZLEVBQUU4RCxLQUFLLENBQUM7SUFDM0U7RUFDSixDQUFDLENBQUM7QUFDTjtBQUdBYSxlQUFlLENBQUNKLE9BQU8sRUFBRSxPQUFPLENBQUM7QUFDakNJLGVBQWUsQ0FBQ0gsU0FBUyxFQUFFLFNBQVMsQ0FBQztBQUNyQ0csZUFBZSxDQUFDRixRQUFRLEVBQUUsUUFBUSxDQUFDO0FBQ25DIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtYWluUGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmF2LXBhZ2VcIiksXG4gICAgcG9wdXBzV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIiksXG4gICAgc2hvd1BvcHVwQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW5mby1pY29uXCIpLFxuICAgIHBvcHVwSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pdGVtXCIpLFxuICAgIGNob3NlQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNob3NlXCIpLFxuICAgIHJlc3VsdEJsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRcIilcblxuZnVuY3Rpb24gc2V0UG9wdXAgKHdyYXAsIHBvcHVwTmFtZSwgYnRucywgcG9wdXBJdGVtcyl7XG4gICAgbGV0IHBvcHVwID0gd3JhcC5xdWVyeVNlbGVjdG9yKGAuJHtwb3B1cE5hbWV9YClcblxuICAgIGJ0bnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgICBpZihidG4ucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucyhwb3B1cE5hbWUpKXtcbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgICAgICAgICAgICAgcG9wdXBJdGVtcy5mb3JFYWNoKGl0ZW0gPT57XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcIl9hY3RpdmVcIilcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5hZGQoXCJfYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICB3cmFwLmNsYXNzTGlzdC5yZW1vdmUoXCJfb3BhY2l0eVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGxldCBjbG9zZUJ0biA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpXG4gICAgICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIl9hY3RpdmVcIilcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCJcbiAgICAgICAgICAgICAgICB3cmFwLmNsYXNzTGlzdC5hZGQoXCJfb3BhY2l0eVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbnNldFBvcHVwKHBvcHVwc1dyYXAsIFwiX2Vhc3lcIiwgc2hvd1BvcHVwQnRucywgcG9wdXBJdGVtcylcbnNldFBvcHVwKHBvcHVwc1dyYXAsIFwiX21lZGl1bVwiLCBzaG93UG9wdXBCdG5zLCBwb3B1cEl0ZW1zKVxuc2V0UG9wdXAocG9wdXBzV3JhcCwgXCJfaGlnaHRcIiwgc2hvd1BvcHVwQnRucywgcG9wdXBJdGVtcylcbnNldFBvcHVwKHBvcHVwc1dyYXAsIFwiX25vdGlmeVwiLCBzaG93UG9wdXBCdG5zLCBwb3B1cEl0ZW1zKVxuXG5mdW5jdGlvbiBzdGFydENvdW50ZG93bihzZWxlY3RvciwgZW5kRGF0ZSkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHtzZWxlY3Rvcn0gLndlbGNvbWVfX3RpbWVyLWl0ZW0tbnVtYCk7XG4gICAgaWYgKGVsZW1lbnRzLmxlbmd0aCAhPT0gNCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIHNlbGVjdG9yIScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKGVuZERhdGUpLmdldFRpbWUoKTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWVyKCkge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgY29uc3QgdGltZUxlZnQgPSB0YXJnZXREYXRlIC0gbm93O1xuXG4gICAgICAgIGlmICh0aW1lTGVmdCA8PSAwKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICAgICAgICAgICAgc2V0VGltZXJWYWx1ZXMoWzAsIDAsIDAsIDBdKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKHRpbWVMZWZ0IC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICAgICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKCh0aW1lTGVmdCAlICgxMDAwICogNjAgKiA2MCAqIDI0KSkgLyAoMTAwMCAqIDYwICogNjApKTtcbiAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHRpbWVMZWZ0ICUgKDEwMDAgKiA2MCAqIDYwKSkgLyAoMTAwMCAqIDYwKSk7XG4gICAgICAgIGNvbnN0IHNlY29uZHMgPSBNYXRoLmZsb29yKCh0aW1lTGVmdCAlICgxMDAwICogNjApKSAvIDEwMDApO1xuXG4gICAgICAgIHNldFRpbWVyVmFsdWVzKFtkYXlzLCBob3VycywgbWludXRlcywgc2Vjb25kc10pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFRpbWVyVmFsdWVzKHZhbHVlcykge1xuICAgICAgICB2YWx1ZXMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50c1tpbmRleF0udGV4dENvbnRlbnQgPSB2YWx1ZSA8IDEwID8gYDAke3ZhbHVlfWAgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlVGltZXIoKTtcbiAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwodXBkYXRlVGltZXIsIDEwMDApO1xufVxuXG5zdGFydENvdW50ZG93bignLndlbGNvbWVfX3RpbWVyJywgJzIwMjUtMDEtMzFUMjM6NTk6NTknKTtcblxuZnVuY3Rpb24gbW9uaXRvclZpc2liaWxpdHkoc2VsZWN0b3IsIGFuaW1hdGlvbiwgZGVsYXkpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG5cbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRWxlbWVudCBub3QgZm91bmQhJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYW5pbWF0aW9uKVxuICAgICAgICAgICAgICAgIH0sIGRlbGF5KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCk7XG59XG5cbi8vINCS0LjQutC70LjQuiDRhNGD0L3QutGG0ZbRl1xubW9uaXRvclZpc2liaWxpdHkoJy5ub3RpZnlfX3BlcnMnLCBcInNob3daZXVzXCIsIDApO1xubW9uaXRvclZpc2liaWxpdHkoJy5ub3RpZnlfX3BlcnMtYnVibGUnLCBcInNob3daZXVzQnVibGVcIiwgMTIwMCk7XG5tb25pdG9yVmlzaWJpbGl0eSgnLmNob3NlX19wZXJzLWJ1YmxlJywgXCJzaG93WmV1c0J1YmxlXCIsIDApO1xubW9uaXRvclZpc2liaWxpdHkoJy5jaG9zZV9fY2FyZC5fZWFzeScsIFwic2hvd0NhcmRcIiwgNDAwKTtcbm1vbml0b3JWaXNpYmlsaXR5KCcuY2hvc2VfX2NhcmQuX21lZGl1bScsIFwic2hvd0NhcmRcIiwgODAwKTtcbm1vbml0b3JWaXNpYmlsaXR5KCcuY2hvc2VfX2NhcmQuX2hpZ2h0JywgXCJzaG93Q2FyZFwiLCAxMjAwKTtcblxuXG5mdW5jdGlvbiB0b2dnbGVCbG9ja3MgKGhpZGVCbG9jaywgaGlkZUNsYXNzLCBzaG93QmxvY2ssIHNob3dDbGFzcywgc3RhdGUpe1xuICAgIG1haW5QYWdlLmNsYXNzTGlzdC5hZGQoc3RhdGUpXG4gICAgaGlkZUJsb2NrLmNsYXNzTGlzdC5hZGQoaGlkZUNsYXNzKVxuICAgIGhpZGVCbG9jay5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+e1xuICAgICAgICBzaG93QmxvY2suc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiXG4gICAgICAgIHNob3dCbG9jay5zdHlsZS5oZWlnaHQgPSBoaWRlQmxvY2suY2xpZW50SGVpZ2h0XG4gICAgICAgIGhpZGVCbG9jay5jbGFzc0xpc3QuYWRkKFwiX2hpZGRlblwiKVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgc2hvd0Jsb2NrLmNsYXNzTGlzdC5hZGQoc2hvd0NsYXNzKVxuICAgICAgICAgICAgc2hvd0Jsb2NrLnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgIGxldCBpdGVtcyA9IHNob3dCbG9jay5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlc3VsdF9fYmV0cy1pdGVtXCIpXG4gICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSwgaSkgPT57XG4gICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwieW91XCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHlvdSA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRfX2JldHMteW91XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0X19idG5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5b3UuY2xhc3NMaXN0LmFkZCgnc2hvd1lvdScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJzaG93QnRuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjcwMClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwic2hvd0l0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgfSwgMjUwICogaXRlbXMubGVuZ3RoIC0gaSAqIDI1MClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSwgNTApXG4gICAgfSlcbn1cblxuLy9mb3IgdGVzdFxuY29uc3QgbWVudUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1idG5cIiksXG4gICAgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS10ZXN0XCIpLFxuICAgIGVhc3lCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVhc3lcIiksXG4gICAgbWVkaXVtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZWRpdW1cIiksXG4gICAgaGlnaHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhpZ2h0XCIpLFxuICAgIG5vU3RhdGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5vdC1qb2luXCIpXG5cbmZ1bmN0aW9uIGNoYW5nZVN0YXRlUGFnZSAoYnRuLCBzdGF0ZSl7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgbWFpblBhZ2UuY2xhc3NOYW1lID0gXCJmYXYtcGFnZVwiXG4gICAgICAgIGlmKHN0YXRlKXtcbiAgICAgICAgICAgIHRvZ2dsZUJsb2NrcyhjaG9zZUJsb2NrLCBcImNob3NlSGlkZVwiLCByZXN1bHRCbG9jaywgXCJyZXN1bHRTaG93XCIsIHN0YXRlKVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuXG5jaGFuZ2VTdGF0ZVBhZ2UoZWFzeUJ0biwgXCJfZWFzeVwiKVxuY2hhbmdlU3RhdGVQYWdlKG1lZGl1bUJ0biwgXCJfbWVkaXVtXCIpXG5jaGFuZ2VTdGF0ZVBhZ2UoaGlnaHRCdG4sIFwiX2hpZ2h0XCIpXG4vLyBjaGFuZ2VTdGF0ZVBhZ2Uobm9TdGF0ZUJ0biwgZmFsc2UpXG4iXX0=
