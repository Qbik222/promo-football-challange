"use strict";

var mainPage = document.querySelector(".fav-page"),
  popupsWrap = document.querySelector(".popup"),
  showPopupBtns = document.querySelectorAll(".info-icon"),
  popupItems = document.querySelectorAll(".popup__item"),
  choseBlock = document.querySelector(".chose"),
  resultBlock = document.querySelector(".result");
function setPopup(wrap, popupName, btns, popupItems) {
  var popup = wrap.querySelector(".".concat(popupName));
  btns.forEach(function (btn) {
    if (btn.parentNode.parentNode.classList.contains(popupName)) {
      btn.addEventListener("click", function () {
        popupItems.forEach(function (item) {
          item.classList.remove("_active");
        });
        popup.classList.add("_active");
        document.body.style.overflow = "hidden";
        wrap.classList.remove("_opacity");
      });
      var closeBtn = popup.querySelector(".popup__close");
      closeBtn.addEventListener("click", function () {
        popup.classList.remove("_active");
        document.body.style.overflow = "auto";
        wrap.classList.add("_opacity");
      });
    }
  });
}
setPopup(popupsWrap, "_easy", showPopupBtns, popupItems);
setPopup(popupsWrap, "_medium", showPopupBtns, popupItems);
setPopup(popupsWrap, "_hight", showPopupBtns, popupItems);
setPopup(popupsWrap, "_notify", showPopupBtns, popupItems);
function startCountdown(selector, endDate) {
  var elements = document.querySelectorAll("".concat(selector, " .welcome__timer-item-num"));
  if (elements.length !== 4) {
    console.error('Invalid selector!');
    return;
  }
  var targetDate = new Date(endDate).getTime();
  function updateTimer() {
    var now = new Date().getTime();
    var timeLeft = targetDate - now;
    if (timeLeft <= 0) {
      clearInterval(intervalId);
      setTimerValues([0, 0, 0, 0]);
      return;
    }
    var days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
    var hours = Math.floor(timeLeft % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));
    var minutes = Math.floor(timeLeft % (1000 * 60 * 60) / (1000 * 60));
    var seconds = Math.floor(timeLeft % (1000 * 60) / 1000);
    setTimerValues([days, hours, minutes, seconds]);
  }
  function setTimerValues(values) {
    values.forEach(function (value, index) {
      elements[index].textContent = value < 10 ? "0".concat(value) : value;
    });
  }
  updateTimer();
  var intervalId = setInterval(updateTimer, 1000);
}
startCountdown('.welcome__timer', '2025-01-31T23:59:59');
function monitorVisibility(selector, animation, delay) {
  var element = document.querySelector(selector);
  if (!element) {
    console.error('Element not found!');
    return;
  }
  var observer = new IntersectionObserver(function (entries) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        setTimeout(function () {
          element.classList.add(animation);
        }, delay);
      }
    });
  });
  observer.observe(element);
}
monitorVisibility('.notify__pers', "showZeus", 0);
monitorVisibility('.notify__pers-buble', "showZeusBuble", 1200);
monitorVisibility('.chose__pers-buble', "showZeusBuble", 0);
monitorVisibility('.chose__card._easy', "showCard", 400);
monitorVisibility('.chose__card._medium', "showCard", 800);
monitorVisibility('.chose__card._hight', "showCard", 1200);
function toggleBlocks(hideBlock, hideClass, showBlock, showClass, state) {
  mainPage.classList.add(state);
  hideBlock.classList.add(hideClass);
  hideBlock.addEventListener("animationend", function () {
    showBlock.style.display = "flex";
    showBlock.style.height = hideBlock.clientHeight;
    hideBlock.classList.add("_hidden");
    setTimeout(function () {
      showBlock.classList.add(showClass);
      showBlock.style.height = "auto";
      setTimeout(function () {
        var items = showBlock.querySelectorAll(".result__bets-item");
        items.forEach(function (item, i) {
          if (item.classList.contains("you")) {
            setTimeout(function () {
              var you = item.querySelector(".result__bets-you");
              var btn = document.querySelector(".result__btn");
              you.classList.add('showYou');
              setTimeout(function () {
                btn.classList.add("showBtn");
              }, 200);
            }, 2700);
          }
          setTimeout(function () {
            item.classList.add("showItem");
          }, 250 * items.length - i * 250);
        });
      });
    }, 50);
  });
}

//for test
var menuBtn = document.querySelector(".menu-btn"),
  menu = document.querySelector(".menu-test"),
  easyBtn = document.querySelector(".easy"),
  mediumBtn = document.querySelector(".medium"),
  hightBtn = document.querySelector(".hight"),
  noStateBtn = document.querySelector(".not-join"),
  darkBtn = document.querySelector(".dark");
function changeStatePage(btn, state) {
  btn.addEventListener("click", function () {
    mainPage.className = "fav-page";
    if (state) {
      toggleBlocks(choseBlock, "choseHide", resultBlock, "resultShow", state);
    }
  });
}
changeStatePage(easyBtn, "_easy");
changeStatePage(mediumBtn, "_medium");
changeStatePage(hightBtn, "_hight");
menuBtn.addEventListener("click", function () {
  menu.classList.toggle("_hidden");
});
darkBtn.addEventListener("click", function () {
  document.body.classList.toggle("dark");
});

// changeStatePage(noStateBtn, false)
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWFpblBhZ2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cHNXcmFwIiwic2hvd1BvcHVwQnRucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cEl0ZW1zIiwiY2hvc2VCbG9jayIsInJlc3VsdEJsb2NrIiwic2V0UG9wdXAiLCJ3cmFwIiwicG9wdXBOYW1lIiwiYnRucyIsInBvcHVwIiwiZm9yRWFjaCIsImJ0biIsInBhcmVudE5vZGUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpdGVtIiwicmVtb3ZlIiwiYWRkIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJjbG9zZUJ0biIsInN0YXJ0Q291bnRkb3duIiwic2VsZWN0b3IiLCJlbmREYXRlIiwiZWxlbWVudHMiLCJsZW5ndGgiLCJjb25zb2xlIiwiZXJyb3IiLCJ0YXJnZXREYXRlIiwiRGF0ZSIsImdldFRpbWUiLCJ1cGRhdGVUaW1lciIsIm5vdyIsInRpbWVMZWZ0IiwiY2xlYXJJbnRlcnZhbCIsImludGVydmFsSWQiLCJzZXRUaW1lclZhbHVlcyIsImRheXMiLCJNYXRoIiwiZmxvb3IiLCJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwidmFsdWVzIiwidmFsdWUiLCJpbmRleCIsInRleHRDb250ZW50Iiwic2V0SW50ZXJ2YWwiLCJtb25pdG9yVmlzaWJpbGl0eSIsImFuaW1hdGlvbiIsImRlbGF5IiwiZWxlbWVudCIsIm9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsInNldFRpbWVvdXQiLCJvYnNlcnZlIiwidG9nZ2xlQmxvY2tzIiwiaGlkZUJsb2NrIiwiaGlkZUNsYXNzIiwic2hvd0Jsb2NrIiwic2hvd0NsYXNzIiwic3RhdGUiLCJkaXNwbGF5IiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiaXRlbXMiLCJpIiwieW91IiwibWVudUJ0biIsIm1lbnUiLCJlYXN5QnRuIiwibWVkaXVtQnRuIiwiaGlnaHRCdG4iLCJub1N0YXRlQnRuIiwiZGFya0J0biIsImNoYW5nZVN0YXRlUGFnZSIsImNsYXNzTmFtZSIsInRvZ2dsZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxRQUFRLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFdBQVcsQ0FBQztFQUNoREMsVUFBVSxHQUFHRixRQUFRLENBQUNDLGFBQWEsQ0FBQyxRQUFRLENBQUM7RUFDN0NFLGFBQWEsR0FBR0gsUUFBUSxDQUFDSSxnQkFBZ0IsQ0FBQyxZQUFZLENBQUM7RUFDdkRDLFVBQVUsR0FBR0wsUUFBUSxDQUFDSSxnQkFBZ0IsQ0FBQyxjQUFjLENBQUM7RUFDdERFLFVBQVUsR0FBR04sUUFBUSxDQUFDQyxhQUFhLENBQUMsUUFBUSxDQUFDO0VBQzdDTSxXQUFXLEdBQUdQLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFNBQVMsQ0FBQztBQUVuRCxTQUFTTyxRQUFRLENBQUVDLElBQUksRUFBRUMsU0FBUyxFQUFFQyxJQUFJLEVBQUVOLFVBQVUsRUFBQztFQUNqRCxJQUFJTyxLQUFLLEdBQUdILElBQUksQ0FBQ1IsYUFBYSxZQUFLUyxTQUFTLEVBQUc7RUFFL0NDLElBQUksQ0FBQ0UsT0FBTyxDQUFDLFVBQUFDLEdBQUcsRUFBSTtJQUNoQixJQUFHQSxHQUFHLENBQUNDLFVBQVUsQ0FBQ0EsVUFBVSxDQUFDQyxTQUFTLENBQUNDLFFBQVEsQ0FBQ1AsU0FBUyxDQUFDLEVBQUM7TUFDdkRJLEdBQUcsQ0FBQ0ksZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQUs7UUFDL0JiLFVBQVUsQ0FBQ1EsT0FBTyxDQUFDLFVBQUFNLElBQUksRUFBRztVQUN0QkEsSUFBSSxDQUFDSCxTQUFTLENBQUNJLE1BQU0sQ0FBQyxTQUFTLENBQUM7UUFDcEMsQ0FBQyxDQUFDO1FBQ0ZSLEtBQUssQ0FBQ0ksU0FBUyxDQUFDSyxHQUFHLENBQUMsU0FBUyxDQUFDO1FBQzlCckIsUUFBUSxDQUFDc0IsSUFBSSxD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QVMsR0FBRyxVQUFVO0lBQy9CLElBQUdmLEtBQUssRUFBQztNQUNMTCxZQUFZLENBQUMxRCxVQUFVLEVBQUUsV0FBVyxFQUFFQyxXQUFXLEVBQUUsWUFBWSxFQUFFOEQsS0FBSyxDQUFDO0lBQzNFO0VBQ0osQ0FBQyxDQUFDO0FBQ047QUFHQWMsZUFBZSxDQUFDTCxPQUFPLEVBQUUsT0FBTyxDQUFDO0FBQ2pDSyxlQUFlLENBQUNKLFNBQVMsRUFBRSxTQUFTLENBQUM7QUFDckNJLGVBQWUsQ0FBQ0gsUUFBUSxFQUFFLFFBQVEsQ0FBQztBQUVuQ0osT0FBTyxDQUFDMUQsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQUs7RUFDbkMyRCxJQUFJLENBQUM3RCxTQUFTLENBQUNxRSxNQUFNLENBQUMsU0FBUyxDQUFDO0FBQ3BDLENBQUMsQ0FBQztBQUVGSCxPQUFPLENBQUNoRSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBSztFQUNuQ2xCLFFBQVEsQ0FBQ3NCLElBQUksQ0FBQ04sU0FBUyxDQUFDcUUsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUMxQyxDQUFDLENBQUM7O0FBRUYiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1haW5QYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYXYtcGFnZVwiKSxcbiAgICBwb3B1cHNXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKSxcbiAgICBzaG93UG9wdXBCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbmZvLWljb25cIiksXG4gICAgcG9wdXBJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2l0ZW1cIiksXG4gICAgY2hvc2VCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hvc2VcIiksXG4gICAgcmVzdWx0QmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdFwiKVxuXG5mdW5jdGlvbiBzZXRQb3B1cCAod3JhcCwgcG9wdXBOYW1lLCBidG5zLCBwb3B1cEl0ZW1zKXtcbiAgICBsZXQgcG9wdXAgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYC4ke3BvcHVwTmFtZX1gKVxuXG4gICAgYnRucy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICAgIGlmKGJ0bi5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKHBvcHVwTmFtZSkpe1xuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgICAgICAgICBwb3B1cEl0ZW1zLmZvckVhY2goaXRlbSA9PntcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiX2FjdGl2ZVwiKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZChcIl9hY3RpdmVcIilcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIlxuICAgICAgICAgICAgICAgIHdyYXAuY2xhc3NMaXN0LnJlbW92ZShcIl9vcGFjaXR5XCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgbGV0IGNsb3NlQnRuID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIilcbiAgICAgICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiX2FjdGl2ZVwiKVxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIlxuICAgICAgICAgICAgICAgIHdyYXAuY2xhc3NMaXN0LmFkZChcIl9vcGFjaXR5XCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuc2V0UG9wdXAocG9wdXBzV3JhcCwgXCJfZWFzeVwiLCBzaG93UG9wdXBCdG5zLCBwb3B1cEl0ZW1zKVxuc2V0UG9wdXAocG9wdXBzV3JhcCwgXCJfbWVkaXVtXCIsIHNob3dQb3B1cEJ0bnMsIHBvcHVwSXRlbXMpXG5zZXRQb3B1cChwb3B1cHNXcmFwLCBcIl9oaWdodFwiLCBzaG93UG9wdXBCdG5zLCBwb3B1cEl0ZW1zKVxuc2V0UG9wdXAocG9wdXBzV3JhcCwgXCJfbm90aWZ5XCIsIHNob3dQb3B1cEJ0bnMsIHBvcHVwSXRlbXMpXG5cbmZ1bmN0aW9uIHN0YXJ0Q291bnRkb3duKHNlbGVjdG9yLCBlbmREYXRlKSB7XG4gICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke3NlbGVjdG9yfSAud2VsY29tZV9fdGltZXItaXRlbS1udW1gKTtcbiAgICBpZiAoZWxlbWVudHMubGVuZ3RoICE9PSA0KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgc2VsZWN0b3IhJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZW5kRGF0ZSkuZ2V0VGltZSgpO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlVGltZXIoKSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBjb25zdCB0aW1lTGVmdCA9IHRhcmdldERhdGUgLSBub3c7XG5cbiAgICAgICAgaWYgKHRpbWVMZWZ0IDw9IDApIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICBzZXRUaW1lclZhbHVlcyhbMCwgMCwgMCwgMF0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IodGltZUxlZnQgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IoKHRpbWVMZWZ0ICUgKDEwMDAgKiA2MCAqIDYwICogMjQpKSAvICgxMDAwICogNjAgKiA2MCkpO1xuICAgICAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigodGltZUxlZnQgJSAoMTAwMCAqIDYwICogNjApKSAvICgxMDAwICogNjApKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IoKHRpbWVMZWZ0ICUgKDEwMDAgKiA2MCkpIC8gMTAwMCk7XG5cbiAgICAgICAgc2V0VGltZXJWYWx1ZXMoW2RheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzXSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VGltZXJWYWx1ZXModmFsdWVzKSB7XG4gICAgICAgIHZhbHVlcy5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnRzW2luZGV4XS50ZXh0Q29udGVudCA9IHZhbHVlIDwgMTAgPyBgMCR7dmFsdWV9YCA6IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVUaW1lcigpO1xuICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh1cGRhdGVUaW1lciwgMTAwMCk7XG59XG5cbnN0YXJ0Q291bnRkb3duKCcud2VsY29tZV9fdGltZXInLCAnMjAyNS0wMS0zMVQyMzo1OTo1OScpO1xuXG5mdW5jdGlvbiBtb25pdG9yVmlzaWJpbGl0eShzZWxlY3RvciwgYW5pbWF0aW9uLCBkZWxheSkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblxuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFbGVtZW50IG5vdCBmb3VuZCEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChhbmltYXRpb24pXG4gICAgICAgICAgICAgICAgfSwgZGVsYXkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KTtcbn1cblxubW9uaXRvclZpc2liaWxpdHkoJy5ub3RpZnlfX3BlcnMnLCBcInNob3daZXVzXCIsIDApO1xubW9uaXRvclZpc2liaWxpdHkoJy5ub3RpZnlfX3BlcnMtYnVibGUnLCBcInNob3daZXVzQnVibGVcIiwgMTIwMCk7XG5tb25pdG9yVmlzaWJpbGl0eSgnLmNob3NlX19wZXJzLWJ1YmxlJywgXCJzaG93WmV1c0J1YmxlXCIsIDApO1xubW9uaXRvclZpc2liaWxpdHkoJy5jaG9zZV9fY2FyZC5fZWFzeScsIFwic2hvd0NhcmRcIiwgNDAwKTtcbm1vbml0b3JWaXNpYmlsaXR5KCcuY2hvc2VfX2NhcmQuX21lZGl1bScsIFwic2hvd0NhcmRcIiwgODAwKTtcbm1vbml0b3JWaXNpYmlsaXR5KCcuY2hvc2VfX2NhcmQuX2hpZ2h0JywgXCJzaG93Q2FyZFwiLCAxMjAwKTtcblxuXG5mdW5jdGlvbiB0b2dnbGVCbG9ja3MgKGhpZGVCbG9jaywgaGlkZUNsYXNzLCBzaG93QmxvY2ssIHNob3dDbGFzcywgc3RhdGUpe1xuICAgIG1haW5QYWdlLmNsYXNzTGlzdC5hZGQoc3RhdGUpXG4gICAgaGlkZUJsb2NrLmNsYXNzTGlzdC5hZGQoaGlkZUNsYXNzKVxuICAgIGhpZGVCbG9jay5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsICgpID0+e1xuICAgICAgICBzaG93QmxvY2suc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiXG4gICAgICAgIHNob3dCbG9jay5zdHlsZS5oZWlnaHQgPSBoaWRlQmxvY2suY2xpZW50SGVpZ2h0XG4gICAgICAgIGhpZGVCbG9jay5jbGFzc0xpc3QuYWRkKFwiX2hpZGRlblwiKVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgc2hvd0Jsb2NrLmNsYXNzTGlzdC5hZGQoc2hvd0NsYXNzKVxuICAgICAgICAgICAgc2hvd0Jsb2NrLnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgIGxldCBpdGVtcyA9IHNob3dCbG9jay5xdWVyeVNlbGVjdG9yQWxsKFwiLnJlc3VsdF9fYmV0cy1pdGVtXCIpXG4gICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSwgaSkgPT57XG4gICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwieW91XCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHlvdSA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRfX2JldHMteW91XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0X19idG5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5b3UuY2xhc3NMaXN0LmFkZCgnc2hvd1lvdScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJzaG93QnRuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjcwMClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwic2hvd0l0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgfSwgMjUwICogaXRlbXMubGVuZ3RoIC0gaSAqIDI1MClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSwgNTApXG4gICAgfSlcbn1cblxuLy9mb3IgdGVzdFxuY29uc3QgbWVudUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1idG5cIiksXG4gICAgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS10ZXN0XCIpLFxuICAgIGVhc3lCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVhc3lcIiksXG4gICAgbWVkaXVtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZWRpdW1cIiksXG4gICAgaGlnaHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhpZ2h0XCIpLFxuICAgIG5vU3RhdGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5vdC1qb2luXCIpLFxuICAgIGRhcmtCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRhcmtcIilcblxuZnVuY3Rpb24gY2hhbmdlU3RhdGVQYWdlIChidG4sIHN0YXRlKXtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICBtYWluUGFnZS5jbGFzc05hbWUgPSBcImZhdi1wYWdlXCJcbiAgICAgICAgaWYoc3RhdGUpe1xuICAgICAgICAgICAgdG9nZ2xlQmxvY2tzKGNob3NlQmxvY2ssIFwiY2hvc2VIaWRlXCIsIHJlc3VsdEJsb2NrLCBcInJlc3VsdFNob3dcIiwgc3RhdGUpXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5cbmNoYW5nZVN0YXRlUGFnZShlYXN5QnRuLCBcIl9lYXN5XCIpXG5jaGFuZ2VTdGF0ZVBhZ2UobWVkaXVtQnRuLCBcIl9tZWRpdW1cIilcbmNoYW5nZVN0YXRlUGFnZShoaWdodEJ0biwgXCJfaGlnaHRcIilcblxubWVudUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiX2hpZGRlblwiKVxufSlcblxuZGFya0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiZGFya1wiKVxufSlcblxuLy8gY2hhbmdlU3RhdGVQYWdlKG5vU3RhdGVCdG4sIGZhbHNlKVxuIl19
