"use strict";

var mainPage = document.querySelector(".fav-page"),
  popupsWrap = document.querySelector(".popup"),
  showPopupBtns = document.querySelectorAll(".info-icon"),
  popupItems = document.querySelectorAll(".popup__item"),
  choseBlock = document.querySelector(".chose"),
  resultBlock = document.querySelector(".result");
function setPopup(wrap, popupName, btns, popupItems) {
  var popup = wrap.querySelector(".".concat(popupName));
  wrap.addEventListener("click", function (e) {
    e.target === wrap ? closePopup() : null;
  });
  var closePopup = function closePopup() {
    popup.classList.remove("_active");
    document.body.style.overflow = "auto";
    wrap.classList.add("_opacity");
  };
  btns.forEach(function (btn) {
    if (btn.parentNode.parentNode.classList.contains(popupName)) {
      btn.addEventListener("click", function () {
        popupItems.forEach(function (item) {
          item.classList.remove("_active");
        });
        popup.classList.add("_active");
        document.body.style.overflow = "hidden";
        wrap.classList.remove("_opacity");
      });
      var closeBtn = popup.querySelector(".popup__close");
      closeBtn.addEventListener("click", function () {
        closePopup();
      });
    }
  });
}
setPopup(popupsWrap, "_easy", showPopupBtns, popupItems);
setPopup(popupsWrap, "_medium", showPopupBtns, popupItems);
setPopup(popupsWrap, "_hight", showPopupBtns, popupItems);
setPopup(popupsWrap, "_notify", showPopupBtns, popupItems);
function startCountdown(selector, endDate) {
  var elements = document.querySelectorAll("".concat(selector, " .welcome__timer-item-num"));
  if (elements.length !== 4) {
    console.error('Invalid selector!');
    return;
  }
  var targetDate = new Date(endDate).getTime();
  function updateTimer() {
    var now = new Date().getTime();
    var timeLeft = targetDate - now;
    if (timeLeft <= 0) {
      clearInterval(intervalId);
      setTimerValues([0, 0, 0, 0]);
      return;
    }
    var days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
    var hours = Math.floor(timeLeft % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));
    var minutes = Math.floor(timeLeft % (1000 * 60 * 60) / (1000 * 60));
    var seconds = Math.floor(timeLeft % (1000 * 60) / 1000);
    setTimerValues([days, hours, minutes, seconds]);
  }
  function setTimerValues(values) {
    values.forEach(function (value, index) {
      elements[index].textContent = value < 10 ? "0".concat(value) : value;
    });
  }
  updateTimer();
  var intervalId = setInterval(updateTimer, 1000);
}
startCountdown('.welcome__timer', '2025-01-31T23:59:59');
function monitorVisibility(selector, animation, delay) {
  var element = document.querySelector(selector);
  if (!element) {
    console.error('Element not found!');
    return;
  }
  var observer = new IntersectionObserver(function (entries) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        setTimeout(function () {
          element.classList.add(animation);
        }, delay);
      }
    });
  });
  observer.observe(element);
}
monitorVisibility('.notify__pers', "showZeus", 0);
monitorVisibility('.notify__pers-buble', "showZeusBuble", 1200);
monitorVisibility('.chose__pers-buble', "showZeusBuble", 0);
monitorVisibility('.chose__card._easy', "showCard", 400);
monitorVisibility('.chose__card._medium', "showCard", 800);
monitorVisibility('.chose__card._hight', "showCard", 1200);
function toggleBlocks(hideBlock, hideClass, showBlock, showClass, state) {
  mainPage.classList.add(state);
  hideBlock.classList.add(hideClass);
  hideBlock.addEventListener("animationend", function () {
    showBlock.style.display = "flex";
    showBlock.style.height = hideBlock.clientHeight;
    hideBlock.classList.add("_hidden");
    setTimeout(function () {
      showBlock.classList.add(showClass);
      showBlock.style.height = "auto";
      setTimeout(function () {
        var items = showBlock.querySelectorAll(".result__bets-item");
        items.forEach(function (item, i) {
          if (item.classList.contains("you")) {
            setTimeout(function () {
              var you = item.querySelector(".result__bets-you");
              var btn = document.querySelector(".result__btn");
              you.classList.add('showYou');
              setTimeout(function () {
                btn.classList.add("showBtn");
              }, 200);
            }, 2700);
          }
          setTimeout(function () {
            item.classList.add("showItem");
          }, 250 * items.length - i * 250);
        });
      });
    }, 50);
  });
}

//for test
var menuBtn = document.querySelector(".menu-btn"),
  menu = document.querySelector(".menu-test"),
  easyBtn = document.querySelector(".easy"),
  mediumBtn = document.querySelector(".medium"),
  hightBtn = document.querySelector(".hight"),
  noStateBtn = document.querySelector(".not-join"),
  darkBtn = document.querySelector(".dark");
function changeStatePage(btn, state) {
  btn.addEventListener("click", function () {
    mainPage.className = "fav-page";
    if (state) {
      toggleBlocks(choseBlock, "choseHide", resultBlock, "resultShow", state);
    }
  });
}
changeStatePage(easyBtn, "_easy");
changeStatePage(mediumBtn, "_medium");
changeStatePage(hightBtn, "_hight");
menuBtn.addEventListener("click", function () {
  menu.classList.toggle("_hidden");
});
darkBtn.addEventListener("click", function () {
  document.body.classList.toggle("dark");
});

// changeStatePage(noStateBtn, false)
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWFpblBhZ2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cHNXcmFwIiwic2hvd1BvcHVwQnRucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cEl0ZW1zIiwiY2hvc2VCbG9jayIsInJlc3VsdEJsb2NrIiwic2V0UG9wdXAiLCJ3cmFwIiwicG9wdXBOYW1lIiwiYnRucyIsInBvcHVwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJjbG9zZVBvcHVwIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJhZGQiLCJmb3JFYWNoIiwiYnRuIiwicGFyZW50Tm9kZSIsImNvbnRhaW5zIiwiaXRlbSIsImNsb3NlQnRuIiwic3RhcnRDb3VudGRvd24iLCJzZWxlY3RvciIsImVuZERhdGUiLCJlbGVtZW50cyIsImxlbmd0aCIsImNvbnNvbGUiLCJlcnJvciIsInRhcmdldERhdGUiLCJEYXRlIiwiZ2V0VGltZSIsInVwZGF0ZVRpbWVyIiwibm93IiwidGltZUxlZnQiLCJjbGVhckludGVydmFsIiwiaW50ZXJ2YWxJZCIsInNldFRpbWVyVmFsdWVzIiwiZGF5cyIsIk1hdGgiLCJmbG9vciIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJ2YWx1ZXMiLCJ2YWx1ZSIsImluZGV4IiwidGV4dENvbnRlbnQiLCJzZXRJbnRlcnZhbCIsIm1vbml0b3JWaXNpYmlsaXR5IiwiYW5pbWF0aW9uIiwiZGVsYXkiLCJlbGVtZW50Iiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwic2V0VGltZW91dCIsIm9ic2VydmUiLCJ0b2dnbGVCbG9ja3MiLCJoaWRlQmxvY2siLCJoaWRlQ2xhc3MiLCJzaG93QmxvY2siLCJzaG93Q2xhc3MiLCJzdGF0ZSIsImRpc3BsYXkiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJpdGVtcyIsImkiLCJ5b3UiLCJtZW51QnRuIiwibWVudSIsImVhc3lCdG4iLCJtZWRpdW1CdG4iLCJoaWdodEJ0biIsIm5vU3RhdGVCdG4iLCJkYXJrQnRuIiwiY2hhbmdlU3RhdGVQYWdlIiwiY2xhc3NOYW1lIiwidG9nZ2xlIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFFBQVEsR0FBR0MsUUFBUSxDQUFDQyxhQUFhLENBQUMsV0FBVyxDQUFDO0VBQ2hEQyxVQUFVLEdBQUdGLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFFBQVEsQ0FBQztFQUM3Q0UsYUFBYSxHQUFHSCxRQUFRLENBQUNJLGdCQUFnQixDQUFDLFlBQVksQ0FBQztFQUN2REMsVUFBVSxHQUFHTCxRQUFRLENBQUNJLGdCQUFnQixDQUFDLGNBQWMsQ0FBQztFQUN0REUsVUFBVSxHQUFHTixRQUFRLENBQUNDLGFBQWEsQ0FBQyxRQUFRLENBQUM7RUFDN0NNLFdBQVcsR0FBR1AsUUFBUSxDQUFDQyxhQUFhLENBQUMsU0FBUyxDQUFDO0FBRW5ELFNBQVNPLFFBQVEsQ0FBRUMsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLElBQUksRUFBRU4sVUFBVSxFQUFDO0VBQ2pELElBQUlPLEtBQUssR0FBR0gsSUFBSSxDQUFDUixhQUFhLFlBQUtTLFNBQVMsRUFBRztFQUUvQ0QsSUFBSSxDQUFDSSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBQ0MsQ0FBQyxFQUFJO0lBQ2pDQSxDQUFDLENBQUNDLE1BQU0sS0FBS04sSUFBSSxHQUFHTyxVQUFVLEVBQUUsR0FBRyxJQUFJO0VBQzNDLENBQUMsQ0FBQztFQUVGLElBQU1BLFVBQVUsR0FBRyxTQUFiQSxVQUFVLEdBQVE7SUFDcEJKLEtBQUssQ0FBQ0ssU0FBUyxDQUFDQyxNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ2pDbEIsUUFBUSxDQUFDbUIsSUFBSSxDQUFDQyxLQUFLLENBQUNDLFFBQVEsR0FBRyxNQUFNO0lBQ3JDWixJQUFJLENBQUNRLFNBQVMsQ0FBQ0ssR0FBRyxDQUFDLFVBQVUsQ0FBQztFQUNs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UUFBUSxDQUFDO0VBQzNDbUYsVUFBVSxHQUFHcEYsUUFBUSxDQUFDQyxhQUFhLENBQUMsV0FBVyxDQUFDO0VBQ2hEb0YsT0FBTyxHQUFHckYsUUFBUSxDQUFDQyxhQUFhLENBQUMsT0FBTyxDQUFDO0FBRTdDLFNBQVNxRixlQUFlLENBQUU5RCxHQUFHLEVBQUVnRCxLQUFLLEVBQUM7RUFDakNoRCxHQUFHLENBQUNYLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFLO0lBQy9CZCxRQUFRLENBQUN3RixTQUFTLEdBQUcsVUFBVTtJQUMvQixJQUFHZixLQUFLLEVBQUM7TUFDTEwsWUFBWSxDQUFDN0QsVUFBVSxFQUFFLFdBQVcsRUFBRUMsV0FBVyxFQUFFLFlBQVksRUFBRWlFLEtBQUssQ0FBQztJQUMzRTtFQUNKLENBQUMsQ0FBQztBQUNOO0FBR0FjLGVBQWUsQ0FBQ0wsT0FBTyxFQUFFLE9BQU8sQ0FBQztBQUNqQ0ssZUFBZSxDQUFDSixTQUFTLEVBQUUsU0FBUyxDQUFDO0FBQ3JDSSxlQUFlLENBQUNILFFBQVEsRUFBRSxRQUFRLENBQUM7QUFFbkNKLE9BQU8sQ0FBQ2xFLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFLO0VBQ25DbUUsSUFBSSxDQUFDL0QsU0FBUyxDQUFDdUUsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUNwQyxDQUFDLENBQUM7QUFFRkgsT0FBTyxDQUFDeEUsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQUs7RUFDbkNiLFFBQVEsQ0FBQ21CLElBQUksQ0FBQ0YsU0FBUyxDQUFDdUUsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUMxQyxDQUFDLENBQUM7O0FBRUYiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1haW5QYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYXYtcGFnZVwiKSxcbiAgICBwb3B1cHNXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKSxcbiAgICBzaG93UG9wdXBCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbmZvLWljb25cIiksXG4gICAgcG9wdXBJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2l0ZW1cIiksXG4gICAgY2hvc2VCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hvc2VcIiksXG4gICAgcmVzdWx0QmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdFwiKVxuXG5mdW5jdGlvbiBzZXRQb3B1cCAod3JhcCwgcG9wdXBOYW1lLCBidG5zLCBwb3B1cEl0ZW1zKXtcbiAgICBsZXQgcG9wdXAgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoYC4ke3BvcHVwTmFtZX1gKVxuXG4gICAgd3JhcC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICBlLnRhcmdldCA9PT0gd3JhcCA/IGNsb3NlUG9wdXAoKSA6IG51bGxcbiAgICB9KVxuXG4gICAgY29uc3QgY2xvc2VQb3B1cCA9ICgpID0+e1xuICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiX2FjdGl2ZVwiKVxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCJcbiAgICAgICAgd3JhcC5jbGFzc0xpc3QuYWRkKFwiX29wYWNpdHlcIilcbiAgICB9XG5cbiAgICBidG5zLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgaWYoYnRuLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMocG9wdXBOYW1lKSl7XG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICAgICAgICAgIHBvcHVwSXRlbXMuZm9yRWFjaChpdGVtID0+e1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJfYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKFwiX2FjdGl2ZVwiKVxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gICAgICAgICAgICAgICAgd3JhcC5jbGFzc0xpc3QucmVtb3ZlKFwiX29wYWNpdHlcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBsZXQgY2xvc2VCdG4gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKVxuICAgICAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICAgICAgICAgICAgICBjbG9zZVBvcHVwKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5zZXRQb3B1cChwb3B1cHNXcmFwLCBcIl9lYXN5XCIsIHNob3dQb3B1cEJ0bnMsIHBvcHVwSXRlbXMpXG5zZXRQb3B1cChwb3B1cHNXcmFwLCBcIl9tZWRpdW1cIiwgc2hvd1BvcHVwQnRucywgcG9wdXBJdGVtcylcbnNldFBvcHVwKHBvcHVwc1dyYXAsIFwiX2hpZ2h0XCIsIHNob3dQb3B1cEJ0bnMsIHBvcHVwSXRlbXMpXG5zZXRQb3B1cChwb3B1cHNXcmFwLCBcIl9ub3RpZnlcIiwgc2hvd1BvcHVwQnRucywgcG9wdXBJdGVtcylcblxuZnVuY3Rpb24gc3RhcnRDb3VudGRvd24oc2VsZWN0b3IsIGVuZERhdGUpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7c2VsZWN0b3J9IC53ZWxjb21lX190aW1lci1pdGVtLW51bWApO1xuICAgIGlmIChlbGVtZW50cy5sZW5ndGggIT09IDQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBzZWxlY3RvciEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldERhdGUgPSBuZXcgRGF0ZShlbmREYXRlKS5nZXRUaW1lKCk7XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVUaW1lcigpIHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGNvbnN0IHRpbWVMZWZ0ID0gdGFyZ2V0RGF0ZSAtIG5vdztcblxuICAgICAgICBpZiAodGltZUxlZnQgPD0gMCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcbiAgICAgICAgICAgIHNldFRpbWVyVmFsdWVzKFswLCAwLCAwLCAwXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcih0aW1lTGVmdCAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcigodGltZUxlZnQgJSAoMTAwMCAqIDYwICogNjAgKiAyNCkpIC8gKDEwMDAgKiA2MCAqIDYwKSk7XG4gICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKCh0aW1lTGVmdCAlICgxMDAwICogNjAgKiA2MCkpIC8gKDEwMDAgKiA2MCkpO1xuICAgICAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcigodGltZUxlZnQgJSAoMTAwMCAqIDYwKSkgLyAxMDAwKTtcblxuICAgICAgICBzZXRUaW1lclZhbHVlcyhbZGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHNdKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRUaW1lclZhbHVlcyh2YWx1ZXMpIHtcbiAgICAgICAgdmFsdWVzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudHNbaW5kZXhdLnRleHRDb250ZW50ID0gdmFsdWUgPCAxMCA/IGAwJHt2YWx1ZX1gIDogdmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZVRpbWVyKCk7XG4gICAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKHVwZGF0ZVRpbWVyLCAxMDAwKTtcbn1cblxuc3RhcnRDb3VudGRvd24oJy53ZWxjb21lX190aW1lcicsICcyMDI1LTAxLTMxVDIzOjU5OjU5Jyk7XG5cbmZ1bmN0aW9uIG1vbml0b3JWaXNpYmlsaXR5KHNlbGVjdG9yLCBhbmltYXRpb24sIGRlbGF5KSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuXG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsZW1lbnQgbm90IGZvdW5kIScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGFuaW1hdGlvbilcbiAgICAgICAgICAgICAgICB9LCBkZWxheSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBvYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpO1xufVxuXG5tb25pdG9yVmlzaWJpbGl0eSgnLm5vdGlmeV9fcGVycycsIFwic2hvd1pldXNcIiwgMCk7XG5tb25pdG9yVmlzaWJpbGl0eSgnLm5vdGlmeV9fcGVycy1idWJsZScsIFwic2hvd1pldXNCdWJsZVwiLCAxMjAwKTtcbm1vbml0b3JWaXNpYmlsaXR5KCcuY2hvc2VfX3BlcnMtYnVibGUnLCBcInNob3daZXVzQnVibGVcIiwgMCk7XG5tb25pdG9yVmlzaWJpbGl0eSgnLmNob3NlX19jYXJkLl9lYXN5JywgXCJzaG93Q2FyZFwiLCA0MDApO1xubW9uaXRvclZpc2liaWxpdHkoJy5jaG9zZV9fY2FyZC5fbWVkaXVtJywgXCJzaG93Q2FyZFwiLCA4MDApO1xubW9uaXRvclZpc2liaWxpdHkoJy5jaG9zZV9fY2FyZC5faGlnaHQnLCBcInNob3dDYXJkXCIsIDEyMDApO1xuXG5cbmZ1bmN0aW9uIHRvZ2dsZUJsb2NrcyAoaGlkZUJsb2NrLCBoaWRlQ2xhc3MsIHNob3dCbG9jaywgc2hvd0NsYXNzLCBzdGF0ZSl7XG4gICAgbWFpblBhZ2UuY2xhc3NMaXN0LmFkZChzdGF0ZSlcbiAgICBoaWRlQmxvY2suY2xhc3NMaXN0LmFkZChoaWRlQ2xhc3MpXG4gICAgaGlkZUJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgKCkgPT57XG4gICAgICAgIHNob3dCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCJcbiAgICAgICAgc2hvd0Jsb2NrLnN0eWxlLmhlaWdodCA9IGhpZGVCbG9jay5jbGllbnRIZWlnaHRcbiAgICAgICAgaGlkZUJsb2NrLmNsYXNzTGlzdC5hZGQoXCJfaGlkZGVuXCIpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICBzaG93QmxvY2suY2xhc3NMaXN0LmFkZChzaG93Q2xhc3MpXG4gICAgICAgICAgICBzaG93QmxvY2suc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1zID0gc2hvd0Jsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVzdWx0X19iZXRzLWl0ZW1cIilcbiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtLCBpKSA9PntcbiAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJ5b3VcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeW91ID0gaXRlbS5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdF9fYmV0cy15b3VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRfX2J0blwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlvdS5jbGFzc0xpc3QuYWRkKCdzaG93WW91JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcInNob3dCdG5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAyNzAwKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJzaG93SXRlbVwiKVxuICAgICAgICAgICAgICAgICAgICB9LCAyNTAgKiBpdGVtcy5sZW5ndGggLSBpICogMjUwKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCA1MClcbiAgICB9KVxufVxuXG4vL2ZvciB0ZXN0XG5jb25zdCBtZW51QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51LWJ0blwiKSxcbiAgICBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51LXRlc3RcIiksXG4gICAgZWFzeUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWFzeVwiKSxcbiAgICBtZWRpdW1CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lZGl1bVwiKSxcbiAgICBoaWdodEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGlnaHRcIiksXG4gICAgbm9TdGF0ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubm90LWpvaW5cIiksXG4gICAgZGFya0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGFya1wiKVxuXG5mdW5jdGlvbiBjaGFuZ2VTdGF0ZVBhZ2UgKGJ0biwgc3RhdGUpe1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgICAgIG1haW5QYWdlLmNsYXNzTmFtZSA9IFwiZmF2LXBhZ2VcIlxuICAgICAgICBpZihzdGF0ZSl7XG4gICAgICAgICAgICB0b2dnbGVCbG9ja3MoY2hvc2VCbG9jaywgXCJjaG9zZUhpZGVcIiwgcmVzdWx0QmxvY2ssIFwicmVzdWx0U2hvd1wiLCBzdGF0ZSlcbiAgICAgICAgfVxuICAgIH0pXG59XG5cblxuY2hhbmdlU3RhdGVQYWdlKGVhc3lCdG4sIFwiX2Vhc3lcIilcbmNoYW5nZVN0YXRlUGFnZShtZWRpdW1CdG4sIFwiX21lZGl1bVwiKVxuY2hhbmdlU3RhdGVQYWdlKGhpZ2h0QnRuLCBcIl9oaWdodFwiKVxuXG5tZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJfaGlkZGVuXCIpXG59KVxuXG5kYXJrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJkYXJrXCIpXG59KVxuXG4vLyBjaGFuZ2VTdGF0ZVBhZ2Uobm9TdGF0ZUJ0biwgZmFsc2UpXG4iXX0=
